
from scipy.stats import spearmanr,kendalltau
def p_value(model_scores, gt_scores):
    """返回 Spearman 和 Kendall 的 p-value"""
    rho, p_rho = spearmanr(model_scores, gt_scores)
    tau, p_tau = kendalltau(model_scores, gt_scores)
    return rho, p_rho, tau, p_tau

# 所有方法名数据
# java
all_methods = {
    "methodname_1": {
        "Human": [2.0,1.6,3.5,2.2,2.4,3.3,3.0,2.0,2.9,3.6,3.3,2.5,2.2,2.5,2.3,2.8,3.4,2.7,2.9,2.3,3.7,2.6,4.0,3.2,2.9],
        "codellama-7b-I": [2,2,4,4,4,4,3,4,4,4,4,3,4,4,4,4,4,4,4,4,4,4,4,4,4],
        "gpt-3.5-turbo": [3,2,3,5,4,4,3,4,4,3,4,3,3,3,3,5,4,4,3,3,5,3,5,4,5],
        "starchat": [4,4,4,5,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],
        "gpt-4":   [2,2,2,4,2,4,2,2,4,4,5,3,2,3,3,5,5,5,5,2,5,3,4,5,4]
    },
    "methodname_2": {
        "Human": [2.4,1,3.5,3,2,3.6,3.5,3.2,4.1,2.3,2,2.6,1.6,3.9,3.1,2.4,2.7,3.3,2.5,1.9,3.5,3.4,3.9,2,1.6],
        "codellama-7b-I": [4,4,3,3,2,3,4,3,3,2,3,4,2,4,3,2,2,3,2,2,3,3,2,2,3],
        "gpt-3.5-turbo": [2,2,2,2,1,3,4,2,5,1,2,2,1,4,4,1,1,3,2,1,3,4,4,1,2],
        "starchat": [3,3,3,4,3,3,3,3,3,3,2,2,3,3,3,2,2,3,3,3,2,3,2,2,3],
        "gpt-4":   [3,3,3,3,1,3,3,4,4,2,2,2,1,4,4,2,3,4,3,2,3,4,2,1,2]
    },
    "methodname_3": {
        "Human": [2.2,1,3,3.1,3.2,3.5,2.7,3,3.9,4.1,1.8,3.2,2.8,3.9,3.1,1.9,2.4,3.8,2.1,3.7,2.7,3.4,1.3,3,2.2],
        "codellama-7b-I": [3,3,2,3,3,3,4,3,3,3,2,4,4,3,3,2,2,3,2,4,2,3,2,3,2],
        "gpt-3.5-turbo": [3,2,1,2,3,3,5,2,3,4,2,4,5,4,2,3,1,3,1,4,1,2,3,3,1],
        "starchat": [2,3,2,2,2,2,2,3,3,2,1,3,1,1,3,3,3,2,1,2,3,3,1,3,2],
        "gpt-4":   [3,3,2,3,2,3,4,4,4,5,3,4,4,4,4,3,2,3,2,4,1,4,1,3,3]
    },
    "methodname_4": {
        "Human": [3.6,4,3.5,4.2,3.9,3.9,3.8,4.4,4.4,2.9,3.5,3.7,3.7,4.5,3.7,2.7,3.1,3.8,3.9,4.3,4.4,4.1,4.1,3.7,3.4],
        "codellama-7b-I": [5,1,4,2,1,2,4,2,2,5,1,5,4,4,2,4,2,3,2,2,4,2,2,4,1],
        "gpt-3.5-turbo": [4,3,4,1,2,5,2,3,4,2,2,1,4,5,3,1,2,2,4,4,3,1,2,5,2],
        "starchat": [3,5,1,1,1,1,1,2,2,1,3,1,5,5,5,1,1,5,5,5,5,2,3,1,1],
        "gpt-4":   [5,4,4,5,4,5,5,5,5,4,2,5,5,5,5,4,4,3,4,5,4,5,3,4,4]
    }
}
#python
# all_methods = {
#     "methodname_1": {
#         "Human": [2.4,2,1.5,2.2,2.6,2.6,3.1,3.4,3.4,2.8,3.1,3.1,1.7,3,2,2.3,1.9,3.6,3,2.5,2.3,2.7,2.2,2,2.1],
#         "codellama-7b-I": [4,4,4,4,5,4,4,5,4,4,4,4,4,4,4,4,3,2,3,4,3,4,4,4,4],
#         "gpt-3.5-turbo": [3,2,3,4,5,3,3,5,4,4,5,4,4,5,3,4,2,2,3,4,2,3,1,3,3],
#         "starchat": [4,5,4,4,4,4,4,5,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],
#         "gpt-4":   [3,2,2,4,4,4,3,4,5,3,5,4,2,4,2,2,1,4,2,4,3,4,2,2,3]
#     },
#     "methodname_2": {
#         "Human": [2.3,1.2,1.3,3,1.8,1.6,3.2,1.8,2.2,2.2,1.9,1.5,1.4,1.6,2,3.2,2.1,3.7,2.1,2.4,2,1.8,2.3,3.4,2.9],
#         "codellama-7b-I": [3,3,2,2,2,2,3,2,2,2,3,2,2,3,2,3,2,3,2,3,4,2,3,4,3],
#         "gpt-3.5-turbo": [2,1,1,3,1,1,2,1,1,3,2,1,1,1,1,5,1,1,1,3,2,1,2,4,4],
#         "starchat": [3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,2,3,3,2,3,3,2,3,2,3],
#         "gpt-4":   [2,1,1,2,1,1,2,1,1,2,2,1,1,2,1,3,2,2,1,2,2,2,2,3,2]
#     },
#     "methodname_3": {
#         "Human": [3.9,2.9,2.8,1.2,3.7,2.7,2.8,3.1,2.9,1.4,3.3,1.5,2.2,1.9,3.4,3.7,2.1,3.7,3,2.1,4.2,3.6,3.6,4.1,4.6],
#         "codellama-7b-I": [4,4,4,1,2,4,2,3,4,2,3,2,1,2,3,4,4,4,2,3,4,3,4,3,4],
#         "gpt-3.5-turbo": [4,3,4,2,3,4,1,3,3,2,3,1,3,1,2,3,3,3,4,1,5,4,4,3,4],
#         "starchat": [4,2,2,2,2,2,3,2,3,2,2,2,2,2,2,3,2,2,3,2,2,3,2,4,5],
#         "gpt-4":   [4,4,3,1,3,3,2,3,2,1,3,1,3,1,4,4,2,5,3,1,4,3,4,4,4]
#     },
#     "methodname_4": {
#         "Human": [4.4,3.8,4,3.6,3.6,3.2,2.9,2.9,3,3.9,3.4,2.4,4.1,3.4,4.6,4,3.8,3.8,4.6,4.3,4.5,4.6,4.3,1.7,4.5],
#         "codellama-7b-I": [4,2,4,5,5,3,5,4,3,4,3,4,4,1,4,3,5,4,5,4,4,4,3,2,4],
#         "gpt-3.5-turbo": [5,4,5,5,4,5,4,4,2,1,4,3,5,4,4,4,5,4,5,5,4,5,5,1,5],
#         "starchat": [5,4,5,1,3,5,5,1,2,5,1,5,5,1,5,5,5,5,5,1,5,5,5,1,3],
#         "gpt-4":   [5,3,5,3,4,5,4,5,3,4,4,1,5,5,5,5,5,4,5,5,5,5,5,1,5]
#     }
# }

# 输出结果
for method, model_data in all_methods.items():
    print(f"\n【{method}】")
    gt = model_data["Human"]
    for model_name, scores in model_data.items():
        if model_name == "Human":
            continue
        rho_1, p_rho, tau_1, p_tau = p_value(scores, gt)
        print(f"{model_name} vs Human：")
        print(f"  tau_1：{tau_1:.4f}")
        print(f"  p_tau：{p_tau:.4f}")
        print(f"  rho_1：{rho_1:.4f}")
        print(f"  p_rho：{p_rho:.4f}")

